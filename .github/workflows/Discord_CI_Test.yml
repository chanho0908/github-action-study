name: CI Notification to Discord

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Build
        run: echo "ë¹Œë“œ ì¤‘..."  # ì‹¤ì œ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ë¡œ ëŒ€ì²´

      - name: Notify Success on Discord (Push or PR)
        if: success()
        uses: Ilshidur/action-discord@0.3.2
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          DISCORD_USERNAME: CI_CAT
          DISCORD_AVATAR: https://github.com/user-attachments/assets/f4a333ae-c6e0-43ed-abe7-4e50a519a3be
          DISCORD_EMBEDS: |
            [
              {
                "title": "CI í†µê³¼ëë‹¤ëƒ¥ ğŸ‰",
                "color": 3066993,
                "description": "ì»¤ë°‹ ë©”ì‹œì§€: `${{ github.event.head_commit.message }}`",
                "fields": [
                  {
                    "name": "ë¸Œëœì¹˜",
                    "value": "${{ github.ref }}",
                    "inline": true
                  },
                  {
                    "name": "ì‘ì„±ì",
                    "value": "${{ github.actor }}",
                    "inline": true
                  }
                ]
              }
            ]

      - name: Notify Failure on Discord (Push or PR)
        if: failure()
        uses: Ilshidur/action-discord@0.3.2
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          DISCORD_USERNAME: CI_CAT
          DISCORD_AVATAR: https://www.google.com/url?sa=i&url=https%3A%2F%2Fwww.alphawiki.org%2Fw%2F%25ED%2595%2598%25EB%2582%2598%25EC%25BD%2594%2520%25EB%2582%2598%25EB%2582%2598&psig=AOvVaw1kgv7isGC3tRHbyKaC6iS_&ust=1752672558335000&source=images&cd=vfe&opi=89978449&ved=0CBUQjRxqFwoTCNDv7Zv8vo4DFQAAAAAdAAAAABAE
          DISCORD_EMBEDS: |
            [
              {
                "title": "ë¹Œë“œ ì‹¤íŒ¨í–ˆë‹¤ëƒ¥ âŒ",
                "color": 15158332,
                "description": "ì»¤ë°‹ ë©”ì‹œì§€: `${{ github.event.head_commit.message }}`",
                "fields": [
                  {
                    "name": "ë¸Œëœì¹˜",
                    "value": "${{ github.ref }}",
                    "inline": true
                  },
                  {
                    "name": "ì‘ì„±ì",
                    "value": "${{ github.actor }}",
                    "inline": true
                  }
                ]
              }
            ]
