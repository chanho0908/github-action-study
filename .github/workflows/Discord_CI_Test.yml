name: CI Notification to Discord

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Build
        run: echo "ë¹Œë“œ ì¤‘..."  # ì‹¤ì œ ë¹Œë“œ ìŠ¤í¬ë¦½íŠ¸ ëŒ€ì²´

      -   name: Notify Success on Discord
                if: ${{ success() }}
                uses: Ilshidur/action-discord@0.3.2
                env:
                    DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK_CI }}
                    DISCORD_USERNAME: CI_CAT
                    DISCORD_AVATAR: https://github.com/user-attachments/assets/f4a333ae-c6e0-43ed-abe7-4e50a519a3be
                    DISCORD_EMBEDS: |
                        [
                          {
                            "title": "CI í†µê³¼ëë‹¤ëƒ¥ ğŸ‰",
                            "color": 3066993,
                            "description": "[#${{ github.event.pull_request.number }}] ${{ github.event.pull_request.title }}\n${{ github.event.pull_request.html_url }}",
                            "fields": [
                              {
                                "name": "ë¸Œëœì¹˜",
                                "value": "${{ github.ref }}",
                                "inline": true
                              },
                              {
                                "name": "ì‘ì„±ì",
                                "value": "${{ github.event.pull_request.user.login }}",
                                "inline": true
                              }
                            ]
                          }
                        ]

      - name: Notify Discord on Failure
        if: failure()
        uses: Ilshidur/action-discord@0.3.2
        env: 
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          DISCORD_USERNAME: CI_CAT
          DISCORD_AVATAR: https://github.com/user-attachments/assets/f4a333ae-c6e0-43ed-abe7-4e50a519a3be
          DISCORD_EMBEDS: |
                        [
                          {
                            "title": "ë¹Œë“œ ì‹¤íŒ¨í–ˆë‹¤ëƒ¥ âŒ",
                            "color": 15158332,
                            "description": "[#${{ github.event.pull_request.number }}] ${{ github.event.pull_request.title }}\n${{ github.event.pull_request.html_url }}",
                            "fields": [
                              {
                                "name": "ë¸Œëœì¹˜",
                                "value": "${{ github.ref }}",
                                "inline": true
                              },
                              {
                                "name": "ì‘ì„±ì",
                                "value": "${{ github.event.pull_request.user.login }}",
                                "inline": true
                              }
                            ]
                          }
                        ]
